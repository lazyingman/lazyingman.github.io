<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>使用 GitHub Action (一键部署)</title>
      <link href="/posts/95fa9691.html"/>
      <url>/posts/95fa9691.html</url>
      
        <content type="html"><![CDATA[<p>此教程参考 <a href="https://akilar.top/posts/f752c86d/">🧊Akilar の糖果屋 🍭</a>，转载需注明出处。</p><h2 id="Github-Action简介">Github Action简介</h2><p>Github Action是 GitHub于2018年10月推出的一个CI\CD服务。</p><details class="folding-tag" ><summary> CI\CD解释 </summary>              <div class='content'>              <div class="note primary simple"><p>CI\CD 其实说的是三件事情：「持续集成（Continuous Integration）」、「持续交付（Continuous Delivery）」、「持续部署（Continuous Deployment）」。<br>因为「持续交付」和「持续部署」的英文缩写是一样的，所以这三件事情缩写成了 CI\CD 。</p></div>              </div>            </details><p>每次部署Hexo都需要运行指令三件套，随着文章越来越多，编译的时间也随之越来越长，通过Github Action，我们只需要在每次完成博客的编写或修改以后，将改动直接push到远程仓库，之后的编译部署的工作统统交给CI来完成即可，如果是看过Coding部署教程的小伙伴，应该对这种持续部署的操作有所感触。</p><h2 id="教程常量声明">教程常量声明</h2><div class="tip info"><p>感谢@YML 的反馈。以下将使用特定的常量名来指代一些名词。此处建议读者直接使用教程内容的常量名。在最后再逐一搜索替换。这样可以避免对各种常量名的混淆。</p></div><table><thead><tr><th>常量名</th><th>常量释义</th></tr></thead><tbody><tr><td><strong>[Blogroot]</strong></td><td>本地存放博客源码的文件夹路径</td></tr><tr><td><strong>[SourceRepo]</strong></td><td>存放博客源码的私有仓库名</td></tr><tr><td><strong>[SiteBlogRepo]</strong></td><td>存放编译好的博客页面的公有仓库名 Site 指站点，教程中会替换成 Github、Gitee、Coding</td></tr><tr><td><strong>[SiteUsername]</strong></td><td>用户名 Site指站点，教程中会替换成 Github、Gitee、Coding</td></tr><tr><td><strong>[SiteToken]</strong></td><td>申请到的令牌码 Site指站点，教程中会替换成 Github、Gitee、Coding</td></tr><tr><td><strong>[TokenUser]</strong></td><td>Coding配置特有的令牌用户名</td></tr></tbody></table><p><strong>这一步其实可以先跳过</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 在记事本中逐个记录，方便替换，以下为我的示例</span><br><span class="line">[Blogroot]：E:\Blogroot</span><br><span class="line"></span><br><span class="line">[SourceRepo]：lazyingman/Hexo</span><br><span class="line"></span><br><span class="line">[SiteBlogRepo]</span><br><span class="line">  [GithubBlogRepo]：lazyingman.github.io</span><br><span class="line">  [GiteeBlogRepo]：lazyingman</span><br><span class="line">  [CodingBlogRepo]：lazyingman/lazyingman</span><br><span class="line"></span><br><span class="line">[SiteUsername]</span><br><span class="line">  [GithubUsername]：lazyingman</span><br><span class="line">  [GiteeUsername]：lazyingman</span><br><span class="line">  [CodingUsername]：lazyingman</span><br><span class="line"></span><br><span class="line">[SiteToken]</span><br><span class="line">  [GithubToken]：15076c8eb9c874sad676bc9bfb13sadw86babf2</span><br><span class="line">  [GiteeToken]：f57acasdadgar4578603adas5d8w79bb</span><br><span class="line">  [CodingToken]：a4e45daf78as1f2670dcbbcfd5as7d8asd8cd66a77</span><br><span class="line"></span><br><span class="line">[GithubEmail]：lazyingman@gmail.com</span><br><span class="line"></span><br><span class="line">[TokenUser]：RAxDiobbRi</span><br></pre></td></tr></table></figure><h2 id="Github-Action-使用教程">Github Action 使用教程</h2><p>为了确保交由<code>Github Action</code>来持续部署时，<code>Github Action</code> 具备足够的权限来进行 <code>hexo deploy</code> 操作,需要先获取 <code>Token</code>。</p><div class="tabs" id="github"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#github-1">GitHub 1</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="github-1"><p>访问 Github-&gt;头像（右上角）-&gt;Settings-&gt;Developer Settings-&gt;Personal access tokens-&gt;generate new token,创建的 Token 名称随意，但必须勾选 repo 项 和 workflows 项。</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action1.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action2.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action3.png" alt=""></p><div class="tip warning"><p>token 只会显示这一次，之后将无法查看，所以务必保证你已经记录下了 Token。之后如果忘记了就只能重新生成重新配置了。</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="创建存放源码的私有仓库">创建存放源码的私有仓库</h2><details class="folding-tag" ><summary> 点击查看 </summary>              <div class='content'>              <p>我们需要创建一个用来存放 <code>Hexo</code> 博客源码的私有仓库<code>[SourceRepo]</code>，这点在 <code>Win10</code> 的 <code>Hexo</code> 博客搭建教程中有提到。为了保持教程的连贯，此处再写一遍。<br><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action10.png" alt=""><br>创建完成后，需要把博客的源码 push 到这里。首先获取远程仓库地址，此处虽然 SSH 和 HTTPS 均可。SSH 在绑定过 ssh key 的设备上无需再输入密码，HTTPS 则需要输入密码，但是 SSH 偶尔会遇到端口占用的情况。请自主选择。<br><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action5.png" alt=""></p><div class="note info simple"><p>这里之所以是私有仓库，是因为在接下来的配置中会用到 <code>Token</code>，如果 <code>Token</code> 被盗用，别人可以肆意操作你的 github 仓库内容，为了避免这一风险，才选择的博客源码闭源。</p></div>              </div>            </details><h2 id="配置-Github-Action">配置 Github Action</h2><ol><li><p>在<code>[Blogroot]</code>新建<code>.github</code>文件夹,注意开头是有个<code>.</code>的。然后在<code>.github</code> 内新建 <code>workflows</code> 文件夹，再在 <code>workflows</code> 文件夹内新建 autodeploy.yml,在<code>[Blogroot]/.github/workflows/autodeploy.yml</code> 里面输入</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">自动部署</span></span><br><span class="line"><span class="comment"># 当有改动推送到master分支时，启动Action</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">      <span class="comment">#2020年10月后github新建仓库默认分支改为main，注意更改</span></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">published</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">检查分支</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Node</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;16.x&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          export TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">缓存</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">cache-npm</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v3</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">cache-name:</span> <span class="string">cache-node-modules</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-build-$&#123;&#123;</span> <span class="string">env.cache-name</span> <span class="string">&#125;&#125;-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/package-lock.json&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.os &#125;&#125;-build-$&#123;&#123; env.cache-name &#125;&#125;-</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.os &#125;&#125;-build-</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.os &#125;&#125;-</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装依赖</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.cache-npm.outputs.cache-hit</span> <span class="type">!=</span> <span class="string">&#x27;true&#x27;</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm install gulp-cli -g #全局安装gulp</span></span><br><span class="line"><span class="string">          npm install --save</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生成静态文件</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo generate</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">部署到Github</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">JamesIves/github-pages-deploy-action@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">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</span> <span class="comment">#更改为自己的token</span></span><br><span class="line">          <span class="attr">repository-name:</span> <span class="string">anzhiyu-a/anzhiyu-a.github.io</span> <span class="comment">#更该为自己的仓库名</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">          <span class="attr">folder:</span> <span class="string">public</span></span><br><span class="line">          <span class="attr">commit-message:</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123; github.event.head_commit.message &#125;&#125;</span> Updated By Github Actions&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>之后需要自己到仓库的 Settings-&gt;Secrets-&gt;actions 下添加环境变量，变量名参考脚本中出现的，依次添加。<br><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action6.png" alt=""></p></li></ol><h2 id="重新设置远程仓库和分支">重新设置远程仓库和分支</h2><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">第一次使用git管理博客源码</button></li><li class="tab"><button type="button" data-href="#-2">曾经使用git管理博客源码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><ol><li><p>删除或者先把<code>[Blogroot]/themes/butterfly/.git</code>移动到非博客文件夹目录下,原因是主题文件夹下的.git文件夹的存在会导致其被识别成子项目，从而无法被上传到源码仓库。</p></li><li><p>在博客根目录1[Blogroot]1路径下运行指令</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init <span class="comment">#初始化</span></span><br><span class="line">git remote add origin git@github.com:[GithubUsername]/[SourceRepo].git <span class="comment">#[SourceRepo]为存放源码的github私有仓库</span></span><br><span class="line">git checkout -b master <span class="comment"># 切换到master分支，</span></span><br><span class="line"><span class="comment">#2020年10月后github新建仓库默认分支改为main，注意更改</span></span><br><span class="line"><span class="comment"># 如果不是，后面的所有设置的分支记得保持一致</span></span><br></pre></td></tr></table></figure></li><li><p>添加屏蔽项<br>因为能够使用指令进行安装的内容不包括在需要提交的源码内，所有我们需要将这些内容添加到屏蔽项，表示不上传到 github 上。这样可以显著减少需要提交的文件量和加快提交速度。打开[Blogroot]/.gitignore,输入以下内容：</p> <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">.deploy_git*/</span><br><span class="line">.idea</span><br><span class="line">themes/butterfly/.git</span><br></pre></td></tr></table></figure><p>如果不是<code>butterfly</code>主题，记得替换最后一行内容为你自己当前使用的主题。</p></li><li><p>之后再运行 git 提交指令，将博客源码提交到 github 上</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;github action update&quot;</span></span><br><span class="line">git push origin master</span><br><span class="line"><span class="comment">#2020年10月后github新建仓库默认分支改为main，注意更改</span></span><br></pre></td></tr></table></figure></li><li><p>此时你的主题文件夹若已经被正常上传，并且你也添加了主题文件夹下的.git 文件夹的屏蔽项。那你可以考虑把第二步移走或删除的<code>.git</code>放回来，用作以后升级。（不禁怀疑真的有人会去用这个方式来升级吗）</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><ol><li>添加屏蔽项<br>因为能够使用指令进行安装的内容不包括在需要提交的源码内，所有我们需要将这些内容添加到屏蔽项，表示不上传到 github 上。这样可以显著减少需要提交的文件量和加快提交速度。<br>打开<code>[Blogroot]/.gitignore</code>,输入以下内容： <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">.deploy_git*/</span><br><span class="line">.idea</span><br><span class="line">themes/butterfly/.git</span><br></pre></td></tr></table></figure>如果不是 butterfly 主题，记得替换最后一行内容为你自己当前使用的主题。</li><li>提交源码到私有仓库<code>[SourceRepo]</code><br>在博客根目录<code>[Blogroot]</code>下启动终端，使用 git 指令重设仓库地址。这样在新建仓库，我们仍旧可以保留珍贵的 commit history，便于版本回滚。 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">rm</span> origin <span class="comment"># 删除原有仓库链接</span></span><br><span class="line">git remote add origin git@github.com:[GithubUsername]/[SourceRepo].git <span class="comment">#[SourceRepo]为新的存放源码的github私有仓库</span></span><br><span class="line">git checkout -b master <span class="comment"># 切换到master分支，</span></span><br><span class="line"><span class="comment">#2020年10月后github新建仓库默认分支改为main，注意更改</span></span><br><span class="line"><span class="comment"># 如果不是，后面的所有设置的分支记得保持一致</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;github action update&quot;</span></span><br><span class="line">git push origin master</span><br><span class="line"><span class="comment">#2020年10月后github新建仓库默认分支改为main，注意更改</span></span><br></pre></td></tr></table></figure></li><li>可能遇到的 bug<br>因为 butterfly 主题文件夹下的.git 文件夹的存在，那么主题文件夹会被识别子项目。从而无法被上传到源码仓库。若是遇到添加屏蔽项，但是还是无法正常上传主题文件夹的情况。请先将本地源码中的 themes 文件夹移动到别的目录下。然后 commit 一次。接着将 themes 文件夹移动回来，再 commit 一次。</li></ol><div class="tip error"><p>要是还不行，那就删了 butterfly 主题文件夹下的.git 文件夹，然后再重复上述的 commit 操作。</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="查看部署情况">查看部署情况</h2><details class="folding-tag" ><summary> 点击查看 </summary>              <div class='content'>              <p>此时，打开 GIthub 存放源码的私有仓库，找到 action。<br><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action7.png" alt=""><br>根据刚刚的 Commit 记录找到相应的任务<br><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action8.png" alt=""><br>根据刚刚的 Commit 记录找到相应的任务<br><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/action9.png" alt=""><br>若全部打钩，恭喜你，你现在可以享受自动部署的快感了。</p>              </div>            </details><h2 id="可能遇到的bug">可能遇到的bug</h2><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">"unknow block tag:"tagname""</button></li><li class="tab"><button type="button" data-href="#-2">"unknow block tag:"spawn failed""</button></li><li class="tab"><button type="button" data-href="#-3">变量名称问题</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><div class="note danger simple"><p>要是在github action部署时遇到unknown block tag: &quot;tagname&quot;这样的报错，说明你可能没有正确上传主题文件夹，也可能遇到安装依赖或生成页面失败的情况</p></div><ol><li><p>是否将node_modules也上传到源码仓库[SourceRepo]了。源码仓库不需要有node_modules文件夹。</p></li><li><p>是否有将<code>[Blogroot]/themes/</code>下的主题文件夹上传，例如检查<code>[SourceRepo]</code>内的 <code>[Blogroot]/themes/Butterfly</code>是否为空文件夹。为了能够正常编译页面，源码仓库需要有 <code>[Blogroot]/themes/Butterfly</code>文件夹及它所包含的主题文件内容。为了避免这两点，需要添加 <code>git</code> 屏蔽项。通过给 <code>.gitignore</code>添加屏蔽项解决。打开<code>[Blogroot]/.gitignore</code>,输入以下内容：</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">.deploy_git*/</span><br><span class="line">.idea</span><br><span class="line">themes/butterfly/.git</span><br></pre></td></tr></table></figure></li><li><p>若是遇到添加屏蔽项，但是还是无法正常上传主题文件夹的情况。请先将本地源码中的<code>themes</code>文件夹移动到别的目录下。然后<code>commit</code>一次。接着将<code>themes</code>文件夹移动回来，再<code>commit</code>一次。</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><div class="note danger simple"><p>若是遇到 <code>spawn failed</code> 报错。在 <code>github action</code> 的配置中出现这一报错。一般是因为涉及到部署地址的配置项有误。</p></div><ol><li>首先排查你在[Blogroot]_config.yml的deploy配置项是否按照上文配置 deploy 项中的步骤正确组装配置链接。</li><li>其次排查[Blogroot].github\workflows\autodeploy.yml中各个关于仓库链接的配置内容，注意按照注释指引检查空格、分支等。</li><li>更多可能的因素和解决方案可以参考<a href="https://blog.zhheo.com">@洪哥 HEO</a>写的方案:<a href="https://blog.zhheo.com/p/128998ac.html">Hexo 错误：spawn failed 的解决方法</a>。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><p>部分不愿意用教程给出的变量名的可能遇到未知bug，此处给出官方的命名规则：</p><p>以下规则适用于密码名称：</p><p>密钥名称只能包含字母数字字符（[a-z]、[A-Z]、[0-9]）或下划线 (_)。 不允许空格。</p><p>密钥名称不得以 GITHUB_ 前缀开头。</p><p>密钥名称不能以数字开头。</p><p>密钥名称不区分大小写。</p><p>密钥名称在所创建的级别上必须是唯一的。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用PS去除图片水印</title>
      <link href="/posts/e2a091a6.html"/>
      <url>/posts/e2a091a6.html</url>
      
        <content type="html"><![CDATA[<p>PS在电脑里吃灰太久，以至于前段时间帮别去除图片中的一些文字内容花了不少时间去复习，在这里记录一下，以防止之后在笨头笨脑的去百度，本教程可以通过PS去除图片中的一些比较简单的文字和水印。我这里使用的PS版本是2018，其他版本可能会有一些不同</p><h2 id="最终效果">最终效果</h2><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps10.webp" alt=""></p><center><small>未去除水印</small></center><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps9.webp" alt=""></p><center><small>使用本教程方式去水印</small></center><h2 id="创建选区">创建选区</h2><ol><li><p>首先使用矩形选框工具框选水印</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps1.webp" alt=""></p></li><li><p>点击选择-&gt;色彩范围</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps2.webp" alt=""></p></li><li><p>因为图片的水印是纯色的，所以我们在取色状态下点一下要去除水印的颜色。通过调整颜色容差让预览框的水印部分为白色，其他内容为黑色。</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps3.webp" alt=""></p></li><li><p>确定之后进入快速蒙板模式</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps4.webp" alt=""></p></li><li><p>使用快速蒙板调整选区的阈值<br>阈值调整之后点击确定，调整阈值的目的为了让选区的半透明像素变成纯色像素</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps5.webp" alt=""></p></li><li><p>确认之后取消蒙版模式，因为图片水印是有一个阴影，我们需要扩展一下选区，扩展选区的数值在<code>3-5</code>左右即可</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps6.webp" alt=""></p></li></ol><h2 id="内容识别填充">内容识别填充</h2><ol start="3"><li><p>编辑 -&gt; 内容识别填充 填充水印，快捷键<code>shift+F5</code></p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps7.webp" alt=""></p></li><li><p>点击确认之后的效果</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps8.webp" alt=""></p></li><li><p>按<code>ctrl+D</code>取消选区，就的到去除完水印的图片了</p><p><img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection/ps10.webp" alt=""></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 经验分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> PS </tag>
            
            <tag> 必看 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>什么是CDN</title>
      <link href="/posts/fcbdffd2.html"/>
      <url>/posts/fcbdffd2.html</url>
      
        <content type="html"><![CDATA[<h2 id="到底什么是CDN">到底什么是CDN</h2><p>如今这个移动互联网时代，越来越多的人使用手机观看视频，丰富自己的娱乐生活。<br><img src="https://pic3.zhimg.com/80/v2-a87de810a6e31abdfc251b7c12586042_720w.webp" alt=""><br>可是，大家在追剧的时候，有没有想过一个问题——为什么有时候明明自己手机的网速很快，但观看视频时，仍然卡顿？<img src="https://cdn.jsdelivr.net/gh/lazyingman/pictureCollection@master/32.jpg" alt=""></p><p>回答这个问题之前，我们先来做一道算术题。</p><p>以之前很火的电视剧为例，当时曾经在某视频APP实现了1千万用户同时在线观看。</p><p>如果大家观看的是1080p清晰度的视频（理论上需要4Mbps带宽），那么，累计需要的流量带宽是10,000,000×4Mbps=40,000,000Mbps=40Tbps。</p><p>对于优酷、爱奇艺这样的互联网视频内容提供商来说，这无疑是非常巨大的流量压力。我们普通计算机的网卡，是1Gbps的带宽。如果优酷有一台超级服务器，那么，这台超级服务器就需要4万块网卡，而且必须百分之百跑满速度，才能够实现这1千万用户的流畅观看。</p><p>对于一些实力不够的服务商，或者突发流量陡增的情况，就会造成拥塞，从而导致卡顿和延时。</p><p>有这么一个说法：当用户打开一个页面，等待超过4秒，他就会关闭这个页面。也就是说，这个用户就会流失。<br>用户的流失，就意味着金钱的流失。</p><p>没有任何一家互联网服务提供商希望这样的情况发生。所以，它们必须想方设法让自己的内容尽快呈现，缩短用户的等待时间，提升用户的体验。</p><p>这是应该是大家最讨厌的图标了<br><img src="https://pic4.zhimg.com/v2-cd74c5fbe733042669fea75ba19b8763_b.webp" alt=""></p><p>而CDN，就是一项非常有效的<strong>缩短时延</strong>的技术。</p><h2 id="CDN的诞生">CDN的诞生</h2><p>上世纪80年代，互联网技术刚刚走入民用领域。</p><p>人们主要通过拨号来访问网络，带宽很低，用户也很少，所以，没有对骨干网以及服务器带来压力。</p><p>随着互联网的爆炸式发展，用户越来越多，加上宽带接入网的出现，内容源服务器和骨干网络的压力越来越大，无法及时响应用户的访问需求。</p><p>1995年，麻省理工学院教授、互联网的发明者之一，Tim Berners-Lee博士发现，网络拥塞越来越严重，将会成为互联网发展的最大障碍。</p><p><img src="https://pic1.zhimg.com/80/v2-d836c00d9aeb628429c8f41ae8446c14_720w.webp" alt=""></p><p>于是，他提出一个学术难题，希望有人能发明一种全新的、从根本上解决问题的方法，来实现互联网内容的无拥塞分发。</p><p>当时Tim Berners-Lee博士的隔壁，是Tom Leighton教授的办公室。他是一位麻省理工学院应用数学教授。</p><p><img src="https://pic4.zhimg.com/80/v2-421952e9cb01c84648a7a7157ace474f_720w.webp" alt=""></p><p>他被Berners-Lee的挑战激起了兴趣，于是他请研究生Danny C. Lewin和其他几位顶级研究人员一起破解这个技术难题。</p><p><img src="https://pic4.zhimg.com/80/v2-a7ac56be2b5bc8d6a01692b60519191b_720w.webp" alt=""></p><p>最终，他们开发了利用数学运算法则来处理内容的动态路由算法技术，有效地解决了这个难题。这个技术，就是CDN。</p><p>他们还为此专门成立了公司，发挥其商业价值。这个公司，就是后来鼎鼎大名的CDN服务鼻祖——Akamai公司。</p><p><img src="https://pic4.zhimg.com/80/v2-15e005183f6d65aa96ea2c1c8cf7833b_720w.webp" alt=""></p><h2 id="CDN的原理">CDN的原理</h2><p>CDN这个技术其实说起来并不复杂，最初的核心理念，就是将内容缓存在终端用户附近。</p><p>内容源不是远么？那么，我们就在靠近用户的地方，建一个缓存服务器，把远端的内容，复制一份，放在这里，不就OK了？</p><p><img src="https://pic1.zhimg.com/v2-aa9f483b52208241bcbbe6ce95028344_b.webp" alt=""></p><p>因为这项技术是把内容进行了分发，所以，它的名字就叫做CDN——Content Delivery Network，内容分发网络。</p><p>具体来说，CDN就是采用更多的缓存服务器（CDN边缘节点），布放在用户访问相对集中的地区或网络中。当用户访问网站时，利用全局负载技术，将用户的访问指向距离最近的缓存服务器上，由缓存服务器响应用户请求。（有点像电商的本地仓吧？）</p><h2 id="CDN的好处">CDN的好处</h2><p>采用CDN技术，最大的好处，就是加速了网站的访问——用户与内容之间的物理距离缩短，用户的等待时间也得以缩短。</p><p>而且，分发至不同线路的缓存服务器，也让跨运营商之间的访问得以加速。</p><p>例如中国移动手机用户访问中国电信网络的内容源，可以通过在中国移动假设CDN服务器，进行加速。效果是非常明显的。</p><p>此外，CDN还有安全方面的好处。内容进行分发后，源服务器的IP被隐藏，受到攻击的概率会大幅下降。而且，当某个服务器故障时，系统会调用临近的健康服务器，进行服务，避免对用户造成影响。</p><p>正因为CDN的好处很多，所以，目前所有主流的互联网服务提供商，都采用了CDN技术。所有的云服务提供商，也都提供了CDN服务（价格也不算贵，按流量计费）。</p><p><img src="https://pic3.zhimg.com/80/v2-aee8bbae5cf731eb90376bbc167ce1e6_720w.webp" alt=""></p><h2 id="CDN和通信行业">CDN和通信行业</h2><p>CDN是从传统IT行业发展起来的一项服务。但是，对于我们通信行业来说，CDN也有非常大的商业价值。</p><p>互联网服务提供商采用CDN，是以存储换时延。花钱购置CDN服务器或云计算服务，以此换取更好的用户体验。</p><p>通信运营商也追捧CDN，但它们的目的，是以存储换带宽——通过服务“下沉”，减轻上层骨干网络的流量压力，避免硬件扩容，降低网络建设成本。</p><p>这个很好理解啊，如果大量的业务流量数据在骨干网跑来跑去，骨干网肯定吃不消，要拼命扩容。如果这些业务流量数据在底层就被解决了，那么，骨干网的带宽压力自然就减轻了。不是么？</p><p><img src="https://pic2.zhimg.com/80/v2-3c80761e11564dff74e73841f243979d_720w.webp" alt=""></p><p>很多运营商已经将CDN下沉到地市级，以此减轻压力，同时可以提升用户体验。</p><p>一直以来，随着网络能力的不断提升，内容资源和计算能力都在不断“往上走”，走到云计算中心。由一个核心云计算中心，对所有终端节点提供服务。</p><p><img src="https://pic3.zhimg.com/80/v2-19b0c5568cbd442176c9fb8314116b46_720w.webp" alt=""></p><p>结果，人们回过头来发现，对于非常大的面积区域，非常多的用户数量，尤其是国家级或世界级的服务，不管你把这个中心设在哪里，也不管你这个中心的能力有多强大，都无法克服物理距离上的障碍，会导致无法忍受的延时和网络拥塞。</p><p>于是乎，人们就开始把云计算中心进行部分“下沉”，这才有了雾计算、霾计算。甚至人们开始质疑，集中式计算是否会最终被分布式计算所取代？</p><p><img src="https://pic1.zhimg.com/80/v2-c5ba0a8c1a1f2128d8a134bc91838abc_720w.webp" alt=""></p><p>在我看来，不存在谁完全取代谁的问题。不同的场景带来不同的需求，不同的需求需要不同的网络架构。场景的多样化是现实存在的，所以，网络架构的灵活化，也是必然的选择。</p><p>即将到来的5G，提出三大场景和切片，用同一张网络，满足不同的需求，就体现了这样的设计思想，顺应了潮流的发展方向。</p><p>总而言之，对于网络技术来说，不管是黑猫、白猫，总之，能抓到老鼠的，就是好猫。难道不是么？</p><blockquote><p>原文地址: <a href="https://zhuanlan.zhihu.com/p/52362950">https://zhuanlan.zhihu.com/p/52362950</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 资源中心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科普 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>推荐几款免费且不限流量的全球CDN</title>
      <link href="/posts/da523892.html"/>
      <url>/posts/da523892.html</url>
      
        <content type="html"><![CDATA[<h1>推荐几款免费且不限流量的全球CDN</h1><h2 id="jsdelivr">jsdelivr</h2><p>官网地址：<a href="https://www.jsdelivr.com">https://www.jsdelivr.com</a><br><psw>没梯子访问可能有点慢</psw>，不过CDN的节点是很快的 可以引用的资源包括NPM、github、wordpress的所有资源，github可以是任意体积小于50M的仓库，具体使用参考官网</p><p><code>Github</code></p><blockquote><p>//加载任何GitHub版本，提交或分支<br>//注意：我们建议将npm用于支持它的项目<br><a href="https://cdn.jsdelivr.net/gh/user/repo@version/file">https://cdn.jsdelivr.net/gh/user/repo@version/file</a></p><p>//任意Github仓库<br>//主分支<br><a href="https://cdn.jsdelivr.net/gh/liub1934/LB-Blog@master/wp-content/themes/Memory/style.css">https://cdn.jsdelivr.net/gh/liub1934/LB-Blog@master/wp-content/themes/Memory/style.css</a><br>//版本分支<br><a href="https://cdn.jsdelivr.net/gh/liub1934/LB-Blog@630440b51d272219117ca7fe34ec5ee4e005e8a9/wp-content/themes/Memory/style.css">https://cdn.jsdelivr.net/gh/liub1934/LB-Blog@630440b51d272219117ca7fe34ec5ee4e005e8a9/wp-content/themes/Memory/style.css</a></p><p>//加载jQuery v3.2.1<br><a href="https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js">https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js</a></p><p>//使用版本范围而不是特定版本<br><a href="https://cdn.jsdelivr.net/gh/jquery/jquery@3.2/dist/jquery.min.js">https://cdn.jsdelivr.net/gh/jquery/jquery@3.2/dist/jquery.min.js</a><br><a href="https://cdn.jsdelivr.net/gh/jquery/jquery@3/dist/jquery.min.js">https://cdn.jsdelivr.net/gh/jquery/jquery@3/dist/jquery.min.js</a></p><p>//完全省略版本以获取最新版本<br>//你不应该在生产中使用它<br><a href="https://cdn.jsdelivr.net/gh/jquery/jquery/dist/jquery.min.js">https://cdn.jsdelivr.net/gh/jquery/jquery/dist/jquery.min.js</a></p><p>//将“.min”添加到任何JS / CSS文件中以获得缩小版本<br>//如果一个不存在，我们将为您生成它<br><a href="https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/src/core.min.js">https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/src/core.min.js</a></p><p>//在末尾添加/以获取目录列表<br><a href="https://cdn.jsdelivr.net/gh/jquery/jquery/">https://cdn.jsdelivr.net/gh/jquery/jquery/</a></p></blockquote><p><code>wordpress</code></p><blockquote><p>从WordPress.org插件SVN repo加载任何插件<br><a href="https://cdn.jsdelivr.net/wp/plugins/Project/tags/version/file">https://cdn.jsdelivr.net/wp/plugins/Project/tags/version/file</a></p><p>//加载一个确切的版本<br><a href="https://cdn.jsdelivr.net/wp/plugins/wp-slimstat/tags/4.6.5/wp-slimstat.js">https://cdn.jsdelivr.net/wp/plugins/wp-slimstat/tags/4.6.5/wp-slimstat.js</a></p><p>//加载最新版本<br>//你不应该在生产中使用它<br><a href="https://cdn.jsdelivr.net/wp/plugins/wp-slimstat/trunk/wp-slimstat.js">https://cdn.jsdelivr.net/wp/plugins/wp-slimstat/trunk/wp-slimstat.js</a></p><p><a href="//xn--WordPress-pw7n.xn--orgSVN-5y7iq091c">//从WordPress.org主题SVN</a> repo加载任何主题<br><a href="https://cdn.jsdelivr.net/wp/themes/project/version/file">https://cdn.jsdelivr.net/wp/themes/project/version/file</a></p><p>//加载一个确切的版本<br><a href="https://cdn.jsdelivr.net/wp/themes/twenty-eightteen/1.7/assets/js/html5.js">https://cdn.jsdelivr.net/wp/themes/twenty-eightteen/1.7/assets/js/html5.js</a></p><p>//将“.min”添加到任何JS / CSS文件中以获得缩小版本<br>//如果一个不存在，我们将为您生成它<br><a href="https://cdn.jsdelivr.net/wp/themes/twenty-eightteen/1.7/assets/js/html5.min.js">https://cdn.jsdelivr.net/wp/themes/twenty-eightteen/1.7/assets/js/html5.min.js</a></p></blockquote><h2 id="staticaly">staticaly</h2><p>官网地址：<a href="https://www.staticaly.com">https://www.staticaly.com</a><br>轻松地从GitHub / GitLab / Bitbucket加载您的项目 没有流量限制或限制。<br>文件通过超快速全球CDN提供。 在URL（不是分支）中使用特定标记或提交哈希。<br>根据URL永久缓存文件。 除master分支外，文件在浏览器中缓存1年。 具体用法：</p><p><code>Github CDN</code></p><blockquote><p><a href="https://cdn.staticaly.com/gh/:user/:repo/:tag/:file">https://cdn.staticaly.com/gh/:user/:repo/:tag/:file</a><br><strong>user为Github的用户名 repo为仓库名 tag为发布的版本号 file文件路径</strong></p></blockquote><h2 id="结语">结语</h2><p>以上几款免费的CDN，都是不限流量的，所以可以用于个人的项目，公司的项目请酌情考虑使用，可能会存在<strong>流量过大</strong>导致出现一些问题。<br>一些比较：<br>1、jsdelivr：图片资源过多可能会出现一些问题，例如本站的表情图片，之前用的一直是jsdelivr，经常出现一大片的表情加载失败的情况，也可能和我表情图片CDN用的是master主版本的原因，因为经常提交有变动，本站其他的静态资源一切都好。<br>2、staticaly：和jsdelivr的问题一样，过多的表情图片有时候个别的几个表情加载不出来，通过地址直接打开页面503报错。不过staticaly有个imgpx可以优化图片，具体参考：<a href="https://www.staticaly.com/imgpx">https://www.staticaly.com/imgpx</a></p><blockquote><p>原文地址: <a href="https://www.31du.cn/blog/jsdelivr.html">https://www.31du.cn/blog/jsdelivr.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 资源中心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 干货 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>butterfly控制特定图片懒加载</title>
      <link href="/posts/20230502a.html"/>
      <url>/posts/20230502a.html</url>
      
        <content type="html"><![CDATA[<p>看过我博客的同学应该发现我的文章顶图偶尔进来以后还要等一会才能出现，还有加载动画的图片偶尔加载不出来，后来经过我一系列的排查发现居然是懒加载的缘故。</p><h3 id="方法一">方法一</h3><p>可以使用 css 的<code>background</code>属性而不使用 img 标签，就可以做到启动器变成对应的 css，从此排除懒加载的影响。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loading-img</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;&quot;</span>) no-repeat center center;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="方法二">方法二</h3><p>虽然 css 的方式可以做到排除但是这并不是我们所预期的，我们需要 img 标签且如果有多个特定图片需要指定不太好写 css，于是就产生了方案二。<br>我们观察<code>butterfly</code>对懒加载的实现可以发现，在<code>themes/butterfly/scripts/filters/post_lazyload.js</code>中第11行左右的<code>lazyload</code>方法中替换了所有的<code>img标签</code>的<code>src属性</code>，所以我们可以通过修改正则表达式来匹配，以达到我们的目的</p><p>预期：给图片添加上 class 为<code>nolazyload</code>时不使用懒加载</p><p>代码修改<code>themes/butterfly/scripts/filters/post_lazyload.js</code>，将 lazyload 方法修改</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> <span class="title function_">lazyload</span>(<span class="params">htmlContent</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bg = hexo.<span class="property">theme</span>.<span class="property">config</span>.<span class="property">lazyload</span>.<span class="property">placeholder</span></span><br><span class="line">    ? <span class="title function_">urlFor</span>(hexo.<span class="property">theme</span>.<span class="property">config</span>.<span class="property">lazyload</span>.<span class="property">placeholder</span>)</span><br><span class="line">    : <span class="string">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> htmlContent.<span class="title function_">replace</span>(</span><br><span class="line">    <span class="regexp">/(&lt;img(?!.*?class[\t]*=[\t]*[&#x27;&quot;].*?nolazyload.*?[&#x27;&quot;]).*? src=)/gi</span>,</span><br><span class="line">    <span class="string">`$1 &quot;<span class="subst">$&#123;bg&#125;</span>&quot; data-lazy-src=`</span></span><br><span class="line">  );</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>给对应的图片添加 class=“nolazyload”,就大功告成了</p>]]></content>
      
      
      <categories>
          
          <category> Hexo魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly教程 </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo主题配置</title>
      <link href="/posts/697cb99d.html"/>
      <url>/posts/697cb99d.html</url>
      
        <content type="html"><![CDATA[<h3 id="主题配置">主题配置</h3><table><tr><td>写法</td><td>解释</td></tr><tr><td>title</td>    <td>【必需】页面标题</td></tr><tr><td>date</td>    <td>【必需】页面创建日期</td></tr><tr><td>type</td>    <td>【必需】标签、分类和友情链接三个页面需要配置</td></tr><tr><td>updated</td>    <td>【可选】页面更新日期</td></tr><tr><td>description</td><td>【可选】页面描述</td></tr><tr><td>keywords</td><td>【可选】页面关键词</td></tr><tr><td>comments</td><td>【可选】显示页面评论模块 （默认 true）</td></tr><tr><td>top_img</td>    <td>【可选】页面顶部图片</td></tr><tr><td>mathjax</td>    <td>【可选】显示mathjax （当设置mathjax的per_page： false时，才需要配置，默认 false）</td></tr><tr><td>katex</td>    <td>【可选】显示katex （当设置katex的per_page： false时，才需要配置，默认 false）</td></tr><tr><td>aside</td>    <td>【可选】显示侧边栏 （默认 true）</td></tr><tr><td>aplayer</td>    <td>【可选】在需要的页面加载aplayer的js和css，请参考文章下面的 配置音樂</td></tr><tr><td>highlight_shrink</td><td>【可选】配置代码框是否展开 （true/false） （默认为设置中highlight_shrink的配置）</td></tr><tr><td>copyright</td><td>【可选】显示文章版权模块（默认为设置中post_copyright的enable配置）</td></tr><tr><td>copyright_author</td><td>【可选】文章版权模块的<b>文章作者</b></td></tr><tr><td>copyright_author_href</td><td>【可选】文章版权模块的链接<b>文章作者</b></td></tr><tr><td>copyright_url</td><td>【可选】文章版权模块的链接<b>文章连结</b></td></tr><tr><td>copyright_info</td><td>【可选】文章版权模块的文字<b>版权声明</b></td></tr></table>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/4a17b156.html"/>
      <url>/posts/4a17b156.html</url>
      
        <content type="html"><![CDATA[<p>欢迎来到 <a href="https://hexo.io/">Hexo</a>! 这是你的第一篇文章. 查看 <a href="https://hexo.io/docs/">documentation</a> 更多信息. 如果你在使用Hexo时遇到任何问题, 你可以在里面找到答案或者你可以在上面问我 <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> 或者你可以在上面问我 <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="快速启动">快速启动</h2><h3 id="创建一个新帖子">创建一个新帖子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="运行服务器">运行服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="生成静态文件">生成静态文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="部署到远程站点">部署到远程站点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> node.js </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
